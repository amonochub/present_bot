# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏—è—Ö - SchoolBot

## –û–±–∑–æ—Ä

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ SchoolBot:
1. ‚úÖ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
2. ‚úÖ –£—Ç–æ—á–Ω–µ–Ω–∏–µ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
3. ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π

## 1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π

### –ü—Ä–æ–±–ª–µ–º–∞
–í —Ñ–∞–π–ª–∞—Ö –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–æ–ª–µ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞. –û–Ω–∏ –ø–æ–ª—É—á–∞–ª–∏ –ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ª–∏–±–æ —Ç–µ–∫—Å—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ –≤ –æ–±–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:

#### –†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (`app/i18n/ru.toml`)
```toml
[start]
student = "–ü—Ä–∏–≤–µ—Ç, —É—á–µ–Ω–∏–∫! –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: /docs /news"
parent = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —Ä–æ–¥–∏—Ç–µ–ª—å! /docs /news /feedback"
teacher = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —É—á–∏—Ç–µ–ª—å! /docs /news /support"
psych = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ø—Å–∏—Ö–æ–ª–æ–≥! /inbox /requests /schedule"
admin = "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –º–æ–¥—É–ª—å. /announce /docs /news"
director = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –¥–∏—Ä–µ–∫—Ç–æ—Ä! /kpi /stats /reports"
unknown = "–†–æ–ª—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É."
```

#### –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (`app/i18n/en.toml`)
```toml
[start]
student = "Hello, student! Available commands: /docs /news"
parent = "Hello, parent! /docs /news /feedback"
teacher = "Hello, teacher! /docs /news /support"
psych = "Hello, psychologist! /inbox /requests /schedule"
admin = "Welcome to the administrative module. /announce /docs /news"
director = "Hello, director! /kpi /stats /reports"
unknown = "Role not defined. Contact support."
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
–û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `app/routes/onboarding.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π:
```python
role_messages = {
    "student": t("start.student"),
    "parent": t("start.parent"),
    "teacher": t("start.teacher"),
    "psych": t("start.psych"),
    "admin": t("start.admin"),
    "director": t("start.director"),
}
```

## 2. –£—Ç–æ—á–Ω–µ–Ω–∏–µ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö —Å—Å—ã–ª–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞
–í —Å–ø–∏—Å–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–¥–∏–Ω –ø—É–Ω–∫—Ç —Å–æ–¥–µ—Ä–∂–∞–ª placeholder "‚Ññ___" –¥–ª—è –Ω–æ–º–µ—Ä–∞ –ø—Ä–∏–∫–∞–∑–∞ –î–û–ù–ú.

### –†–µ—à–µ–Ω–∏–µ
–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –≤ –æ–±–µ–∏—Ö –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è—Ö —Å —Ä–µ–∞–ª—å–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º –ø—Ä–∏–∫–∞–∑–∞:

#### –†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
```toml
[docs]
item_standard = "‚Ä¢ –ü–æ—Ä—è–¥–æ–∫ –æ–∫–∞–∑–∞–Ω–∏—è –ø—Å–∏—Ö–æ–ª–æ–≥–æ‚Äë–ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–º–æ—â–∏ (–ü—Ä–∏–∫–∞–∑ –î–û–ù–ú ‚Ññ2033 –æ—Ç 31.12.2020)"
```

#### –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
```toml
[docs]
item_standard = "‚Ä¢ Order of psychological and pedagogical assistance (Order DONM ‚Ññ2033 dated 31.12.2020)"
```

## 3. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π

### –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —á–∞—Å—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `/news` –≤–æ–∑–º–æ–∂–Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∞–π—Ç mos.ru. –•–æ—Ç—è –≤ –∫–æ–¥–µ —É–∂–µ –±—ã–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ.

### –†–µ—à–µ–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π:

#### –£–ª—É—á—à–µ–Ω–∏—è –≤ `app/services/news_parser.py`

1. **Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (–æ—Å–Ω–æ–≤–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å):
   - TTL: 5 –º–∏–Ω—É—Ç
   - –ö–ª—é—á: `news_cache:{limit}`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ Redis

2. **–õ–æ–∫–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (fallback):
   - TTL: 15 –º–∏–Ω—É—Ç
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis

3. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**:
   - –í—Å–µ –º–µ—Ç–æ–¥—ã —Å—Ç–∞–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏
   - –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```python
async def get_news_cards(self, limit: int = 5) -> List[Dict[str, Any]]:
    """–ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º"""
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º Redis –∫—ç—à (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
    cache_key = f"news_cache:{limit}"
    try:
        from app.services.cache_service import redis_client
        import json
        
        cached_data = await redis_client.get(cache_key)
        if cached_data:
            return json.loads(cached_data)
    except Exception as e:
        self.logger.warning(f"Redis –∫—ç—à –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: {e}")

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à
    cache_key_local = f"news_{limit}"
    if cache_key_local in self._cache:
        cached_data, cached_time = self._cache[cache_key_local]
        if now - cached_time < self._cache_ttl:
            return cached_data

    # –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ —Å —Å–∞–π—Ç–∞
    news_cards = self._parse_news_cards(soup, limit)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Redis –∫—ç—à
    try:
        await redis_client.setex(cache_key, 300, json.dumps(news_cards))
    except Exception as e:
        self.logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Redis –∫—ç—à: {e}")

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à
    self._cache[cache_key_local] = (news_cards, now)
    return news_cards
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
–û–±–Ω–æ–≤–ª–µ–Ω `app/routes/docs.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤:
```python
# –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º
news_cards = await get_news_cards(limit=5)
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π

### 1. –†–æ–ª–µ–≤–∞—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è
- ‚úÖ –ö–∞–∂–¥–∞—è —Ä–æ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- ‚úÖ –£–ª—É—á—à–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º UX/UI

### 2. –¢–æ—á–Ω–æ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã placeholder'—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –ø—Ä–∏–∫–∞–∑–æ–≤
- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ –£—Å–∫–æ—Ä–µ–Ω –æ—Ç–≤–µ—Ç –±–æ—Ç–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (fallback –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
- `app/i18n/ru.toml` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏
- `app/i18n/en.toml` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏
- `app/routes/onboarding.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π
- `app/services/news_parser.py` - —É–ª—É—á—à–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- `app/routes/docs.py` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è** –¥–ª—è –≤—Å–µ—Ö 6 —Ä–æ–ª–µ–π
- **–¢–æ—á–Ω—ã–µ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏ –ø—Ä–∏–∫–∞–∑–æ–≤
- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–æ–≤–æ—Å—Ç–µ–π —Å TTL 5-15 –º–∏–Ω—É—Ç
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Å–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ü—Ä–æ–µ–∫—Ç SchoolBot —Ç–µ–ø–µ—Ä—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

1. **–ü–æ–ª–Ω—É—é —Ä–æ–ª–µ–≤—É—é –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—é** —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è–º–∏
2. **–¢–æ—á–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é!** üöÄ

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2024-01-XX*
*–ê–≤—Ç–æ—Ä: AI Assistant* 