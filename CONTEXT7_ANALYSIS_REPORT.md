# Context7 –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ SchoolBot

## üìä –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- **Mypy –æ—à–∏–±–∫–∏**: 303 ‚Üí 5 (98.3% –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- **Ruff –æ—à–∏–±–∫–∏**: 166 ‚Üí 0 (100% –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- **Black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 63 —Ñ–∞–π–ª–∞ ‚Üí 0 (100% –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

### üîÑ –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –û—Å—Ç–∞–≤—à–∏–µ—Å—è Mypy –æ—à–∏–±–∫–∏ (5)
```
app/routes/theme.py:58: error: Statement is unreachable [unreachable]
app/routes/help.py:188: error: Statement is unreachable [unreachable]
app/routes/psych.py:65: error: Function does not return a value [func-returns-value]
app/routes/psych.py:67: error: Statement is unreachable [unreachable]
app/bot.py:344: error: Statement is unreachable [unreachable]
```

#### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ **SQLAlchemy –æ—à–∏–±–∫–∞**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å `metadata` ‚Üí `notification_metadata`
- ‚úÖ **Pydantic –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã**: –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å `@validator` –Ω–∞ `@field_validator`
- ‚úÖ **Ruff –æ—à–∏–±–∫–∏**: –í—Å–µ 22 –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ **Black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ 33 —Ñ–∞–π–ª–∞ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω—ã

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### SQLAlchemy –ø—Ä–æ–±–ª–µ–º–∞
```python
# –ë—ã–ª–æ:
metadata = Column(String, nullable=True)  # type: ignore

# –°—Ç–∞–ª–æ:
notification_metadata = Column(String, nullable=True)  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

#### Pydantic –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
```python
# –ë—ã–ª–æ:
@validator("TELEGRAM_TOKEN")
def validate_telegram_token(cls, v: str) -> str:

# –°—Ç–∞–ª–æ:
@field_validator("TELEGRAM_TOKEN")
@classmethod
def validate_telegram_token(cls, v: str) -> str:
```

#### –î–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
```python
# –ë—ã–ª–æ:
await call.message.edit_text("üè† –í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –¥–µ–º–æ-–º–µ–Ω—é", reply_markup=menu("super", lang))

# –°—Ç–∞–ª–æ:
await call.message.edit_text(
    "üè† –í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –¥–µ–º–æ-–º–µ–Ω—é",
    reply_markup=menu("super", lang),
)
```

## üõ†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –û—Å—Ç–∞–≤—à–∏–µ—Å—è mypy –æ—à–∏–±–∫–∏

–≠—Ç–∏ –æ—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω—ã —Å —Ç–µ–º, —á—Ç–æ mypy —Å—á–∏—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–º–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–î–æ–±–∞–≤–∏—Ç—å type ignore –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**:
```python
await call.answer(t("common.theme_switched", lang))  # type: ignore[unreachable]
```

2. **–ò–ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–æ–≥–∏–∫—É** –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è unreachable statements

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- **Mypy**: 303 –æ—à–∏–±–∫–∏
- **Ruff**: 166 –æ—à–∏–±–æ–∫
- **Black**: 63 —Ñ–∞–π–ª–∞
- **–¢–µ—Å—Ç—ã**: –ù–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- **Mypy**: 5 –æ—à–∏–±–æ–∫ (98.3% —É–ª—É—á—à–µ–Ω–∏–µ)
- **Ruff**: 0 –æ—à–∏–±–æ–∫ (100% —É–ª—É—á—à–µ–Ω–∏–µ)
- **Black**: 0 —Ñ–∞–π–ª–æ–≤ (100% —É–ª—É—á—à–µ–Ω–∏–µ)
- **–¢–µ—Å—Ç—ã**: –¢—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å SQLAlchemy `metadata` –ø—Ä–æ–±–ª–µ–º—É
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å Pydantic –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
3. ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 5 mypy –æ—à–∏–±–æ–∫

### üü° –í–∞–∂–Ω–æ
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å 22 ruff –æ—à–∏–±–∫–∏
2. ‚úÖ –ü–µ—Ä–µ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å 33 —Ñ–∞–π–ª–∞ —Å black
3. ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ
1. –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é –≤ –º–æ–¥—É–ª–∏
2. –£–ª—É—á—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å pre-commit hooks

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### ‚úÖ –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ó–ê–í–ï–†–®–ï–ù)
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å SQLAlchemy `metadata` –ø—Ä–æ–±–ª–µ–º—É
- [x] –û–±–Ω–æ–≤–∏—Ç—å Pydantic –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è mypy –æ—à–∏–±–∫–∏

### ‚úÖ –≠—Ç–∞–ø 2: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (–ó–ê–í–ï–†–®–ï–ù)
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å ruff –æ—à–∏–±–∫–∏
- [x] –ü—Ä–∏–º–µ–Ω–∏—Ç—å black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

### üü° –≠—Ç–∞–ø 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –û–±–Ω–æ–≤–∏—Ç—å README.md
- [ ] –°–æ–∑–¥–∞—Ç—å CONTRIBUTING.md
- [ ] –î–æ–±–∞–≤–∏—Ç—å CODE_STYLE.md

## üèÜ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç SchoolBot –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–æ—Ç–ª–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å** –≤ —É–ª—É—á—à–µ–Ω–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞:

- ‚úÖ **98.3% mypy –æ—à–∏–±–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**
- ‚úÖ **100% ruff –æ—à–∏–±–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**
- ‚úÖ **100% black —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**

–û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–≤—è–∑–∞–Ω—ã —Å:
1. **Unreachable statements** –≤ mypy (5 –æ—à–∏–±–æ–∫)
2. **–¢–µ—Å—Ç—ã** —Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è SQLAlchemy –ø—Ä–æ–±–ª–µ–º

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å **–≤—ã—Å–æ–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞**.

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2024-01-XX*
*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2024-01-XX*
