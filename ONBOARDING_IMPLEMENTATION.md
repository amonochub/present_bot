# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ —Ä–æ–ª–µ–π

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫—Ä–∞—Å–∏–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –¥–ª—è SchoolBot —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–æ–ª–µ–π –∏–∑ –ø–∞–ø–∫–∏ `onboard_cards_v3/`. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **`app/handlers/onboarding.py`** - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
2. **`app/keyboards/onboarding.py`** - –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
3. **`app/routes/onboarding.py`** - –†–æ—É—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
4. **`tests/test_onboarding.py`** - –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–æ–ª–µ–π

–í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–∑–º–µ—â–µ–Ω—ã –≤ –ø–∞–ø–∫–µ `onboard_cards_v3/`:
- `onboard_teacher.png` - –£—á–∏—Ç–µ–ª—å
- `onboard_admin.png` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è
- `onboard_director.png` - –î–∏—Ä–µ–∫—Ç–æ—Ä
- `onboard_parent.png` - –†–æ–¥–∏—Ç–µ–ª—å
- `onboard_student.png` - –£—á–µ–Ω–∏–∫
- `onboard_psych.png` - –ü—Å–∏—Ö–æ–ª–æ–≥

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. –ö–æ–º–∞–Ω–¥—ã

- `/onboard` - –ó–∞–ø—É—Å–∫ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- `/carousel` - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—É—Å–µ–ª–∏ –≤—Å–µ—Ö —Ä–æ–ª–µ–π

### 2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –í—ã–±–æ—Ä —Ä–æ–ª–∏
- –ö—Ä–∞—Å–∏–≤—ã–µ –∫–Ω–æ–ø–∫–∏ —Å —ç–º–æ–¥–∑–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–æ–ª–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏

#### –ö–∞—Ä—É—Å–µ–ª—å —Ä–æ–ª–µ–π
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Ä–æ–ª—è–º–∏ —Å –ø–æ–º–æ—â—å—é —Å—Ç—Ä–µ–ª–æ–∫
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2 –∏–∑ 6")
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏ –ø—Ä—è–º–æ –∏–∑ –∫–∞—Ä—É—Å–µ–ª–∏

#### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞
- –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å –≤—ã–±–æ—Ä
- –ö—Ä–∞—Å–∏–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–º –≤—ã–±–æ—Ä–µ

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ /start
- –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –≤—ã–±–æ—Ä –º–µ–∂–¥—É –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–æ–º –∏ –ø—Ä—è–º—ã–º –≤—Ö–æ–¥–æ–º
- –ö—Ä–∞—Å–∏–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏

#### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ `app/i18n/ru.toml`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```python
# –°–ª–æ–≤–∞—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–æ–ª–µ–π –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
ROLE_IMAGES = {
    "teacher": "onboard_cards_v3/onboard_teacher.png",
    "admin": "onboard_cards_v3/onboard_admin.png",
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏
}
```

### –û–ø–∏—Å–∞–Ω–∏—è —Ä–æ–ª–µ–π

```python
ROLE_DESCRIPTIONS = {
    "teacher": {
        "title": "üë©‚Äçüè´ –£—á–∏—Ç–µ–ª—å",
        "description": "‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∞–º–∏\n‚Ä¢ –ü–æ–¥–∞—á–∞ –∑–∞—è–≤–æ–∫ –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É\n..."
    },
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏
}
```

### FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è

```python
class OnboardingStates(StatesGroup):
    selecting_role = State()
    confirming_role = State()
```

## –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã

### 1. –í—ã–±–æ—Ä —Ä–æ–ª–∏
```
[üë©‚Äçüè´ –£—á–∏—Ç–µ–ª—å] [üèõ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è]
[üìà –î–∏—Ä–µ–∫—Ç–æ—Ä] [üë™ –†–æ–¥–∏—Ç–µ–ª—å]
[üë®‚Äçüéì –£—á–µ–Ω–∏–∫] [üßë‚Äç‚öïÔ∏è –ü—Å–∏—Ö–æ–ª–æ–≥]
[üñº –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ä–æ–ª–∏]
```

### 2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```
[‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä]
[üîÑ –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é —Ä–æ–ª—å]
```

### 3. –ö–∞—Ä—É—Å–µ–ª—å
```
[‚óÄÔ∏è] [‚ñ∂Ô∏è]
[‚úÖ –í—ã–±—Ä–∞—Ç—å –£—á–∏—Ç–µ–ª—å]
[üîô –ö —Å–ø–∏—Å–∫—É —Ä–æ–ª–µ–π]
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ä–æ–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö callback –¥–∞–Ω–Ω—ã—Ö

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ –ù–∞—á–∞–ª–æ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- ‚úÖ –í—ã–±–æ—Ä —Ä–æ–ª–∏
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ä—É—Å–µ–ª–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–æ–ª–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–ø–∏—Å–∞–Ω–∏–π

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
pytest tests/test_onboarding.py -v
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
2. –í—ã–±–µ—Ä–∏—Ç–µ "üöÄ –ü—Ä–æ–π—Ç–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—é —Ä–æ–ª—å
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—ã–±–æ—Ä

### –î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ö–æ–º–∞–Ω–¥–∞ `/onboard` –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º
- –ö–æ–º–∞–Ω–¥–∞ `/carousel` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Ä–æ–ª–µ–π

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–µ–ª–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º
2. **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ü–æ–Ω—è—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
3. **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
4. **–ì–∏–±–∫–æ—Å—Ç—å** - –ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏
5. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
6. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ä–æ–ª–∏

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ê–Ω–∏–º–∞—Ü–∏–∏** - –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
2. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ —Ä–æ–ª–µ–π
4. **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
5. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã** - –î–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏-–∏–≥—Ä—ã –∏–ª–∏ –∫–≤–∏–∑—ã 