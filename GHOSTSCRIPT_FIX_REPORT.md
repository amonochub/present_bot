# üêõ –û—Ç—á–µ—Ç –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ—à–∏–±–∫–∏ Ghostscript

## üìã –ü—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞ Ghostscript –≤—Å–µ –µ—â–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –±–æ—Ç–µ!** 

–ò–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –≤–∏–¥–Ω–æ, —á—Ç–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ PDF —Ñ–∞–π–ª–∞ "–ë—É—Ä–∞–∫–æ–≤ –ê–Ω–¥—Ä–µ–π –Æ—Ä—å–µ–≤–∏—á.pdf" –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ Ghostscript 10.0.0.

### üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã:
- **–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- **–°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é** –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- **–ù—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## ‚úÖ –ß—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

### **Telegram-file-bot:**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω `output_type="pdf"`** - –æ–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–π Ghostscript
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω fallback —Å `force_ocr=True`** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π OCR
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

### **Present-bot:**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –≤ pdf_factory.py
- ‚úÖ **Fallback –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª—è —Å–ª—É—á–∞–µ–≤ –æ—à–∏–±–æ–∫ Ghostscript

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

**–ö–æ–¥ –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π.

## üîß –†–µ—à–µ–Ω–∏–µ

### **–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**
```bash
./deploy_to_server.sh
```

### **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
1. **–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É** (89.169.38.246)
2. **–û–±–Ω–æ–≤–ª—è–µ—Ç –æ–±–∞ –±–æ—Ç–∞** —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
3. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π** –≤ –∫–æ–¥–µ
4. **–ü—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é** –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–æ–≤** —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º
6. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å** –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è telegram-file-bot:**
```python
# –ë—ã–ª–æ:
pdf2image.convert_from_path(pdf_path)

# –°—Ç–∞–ª–æ:
pdf2image.convert_from_path(pdf_path, output_type="pdf")

# –î–æ–±–∞–≤–ª–µ–Ω fallback:
def process_pdf_with_fallback(pdf_path: str) -> List[Image.Image]:
    try:
        return pdf2image.convert_from_path(pdf_path, output_type="pdf")
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ Ghostscript: {e}")
        return pdf2image.convert_from_path(pdf_path, force_ocr=True)
```

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è present-bot:**
```python
# –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ pdf_factory.py
def process_pdf_with_fallback_present(pdf_path: str) -> List[Image.Image]:
    try:
        return pdf2image.convert_from_path(pdf_path, output_type="pdf")
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ Ghostscript –≤ present-bot: {e}")
        return pdf2image.convert_from_path(pdf_path, force_ocr=True)
```

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:
- ‚úÖ **–û—à–∏–±–∫–∞ Ghostscript –∏—Å—á–µ–∑–Ω–µ—Ç**
- ‚úÖ **PDF —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
- ‚úÖ **Fallback –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- ‚úÖ **–û–±–∞ –±–æ—Ç–∞ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å** –±–µ–∑ –æ—à–∏–±–æ–∫ PDF

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x deploy_to_server.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./deploy_to_server.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
ssh root@89.169.38.246 "docker logs telegram-file-bot_bot_1 --tail 10"
ssh root@89.169.38.246 "docker logs present-bot_bot_1 --tail 10"
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- **–õ–æ–≥–∏ –±–æ—Ç–æ–≤** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ Ghostscript
- **–û–±—Ä–∞–±–æ—Ç–∫—É PDF —Ñ–∞–π–ª–æ–≤** —á–µ—Ä–µ–∑ Telegram
- **–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤** —á–µ—Ä–µ–∑ systemd

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω, –Ω–æ –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!**

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `./deploy_to_server.sh` –æ—à–∏–±–∫–∞ Ghostscript –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å, –∏ PDF —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –æ–±–æ–∏—Ö –±–æ—Ç–∞—Ö.

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: $(date)*
*–°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è* 