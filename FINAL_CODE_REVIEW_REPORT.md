# üîç –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞ SchoolBot

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤**
- ‚úÖ **update_all_bots.sh** –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ `scripts/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- ‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

#### 2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
- ‚úÖ **–ü–∞—Ä–æ–ª—å –ë–î** - –æ—Å–ª–∞–±–ª–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–º–∏–Ω–∏–º—É–º 1 —Å–∏–º–≤–æ–ª –≤–º–µ—Å—Ç–æ 8)
- ‚úÖ **Telegram —Ç–æ–∫–µ–Ω** - —É–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π placeholder
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫** - —É–ø—Ä–æ—â–µ–Ω–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

#### 3. **Health check —Å–µ—Ä–≤–µ—Ä**
- ‚úÖ **–ü–æ—Ä—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - —Å 8081 –Ω–∞ 8080 –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è docker-compose
- ‚úÖ **–ê–¥—Ä–µ—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - —Å 127.0.0.1 –Ω–∞ 0.0.0.0 –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–ª—è –ë–î –∏ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

#### 4. **–ò–º–ø–æ—Ä—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
- ‚úÖ **–í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–ª–∞—Å—Å—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- ‚úÖ **–°–µ—Ä–≤–∏—Å—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** - command_service, feedback_service, etc.
- ‚úÖ **Middleware –ø–æ–¥–∫–ª—é—á–µ–Ω—ã** - LoadingMiddleware, CSRFMiddleware, etc.
- ‚úÖ **–†–æ—É—Ç–µ—Ä—ã –≤–∫–ª—é—á–µ–Ω—ã** - include_all —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 5. **–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ**
- ‚úÖ **–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã** - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ **–ò–º–ø–æ—Ä—Ç –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω** - –≤ manage.py
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏ —É–ø—Ä–æ—â–µ–Ω—ã** - –±–µ–∑ seed –≤—ã–∑–æ–≤–∞

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏:

### ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç:
1. **–û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç** - `app/bot.py` ‚úÖ
2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - `app/config.py` ‚úÖ
3. **Health check** - `app/health.py` ‚úÖ
4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ –º–æ–¥–µ–ª–∏ –∏ —Å–µ—Å—Å–∏–∏ ‚úÖ
5. **–°–µ—Ä–≤–∏—Å—ã** - –≤—Å–µ 11 —Å–µ—Ä–≤–∏—Å–æ–≤ ‚úÖ
6. **Middleware** - –≤—Å–µ 8 middleware ‚úÖ
7. **–†–æ—É—Ç–µ—Ä—ã** - –≤—Å–µ 12 —Ä–æ—É—Ç–µ—Ä–æ–≤ ‚úÖ
8. **–£—Ç–∏–ª–∏—Ç—ã** - hash, csrf, i18n ‚úÖ
9. **Docker** - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ
10. **–°–∫—Ä–∏–ø—Ç—ã** - –¥–µ–ø–ª–æ–π, –º–∏–≥—Ä–∞—Ü–∏–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚úÖ

### ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã:
- ‚úÖ `from app.services.command_service import init_command_service, setup_all_commands`
- ‚úÖ `from app.middlewares.loading import LoadingMiddleware`
- ‚úÖ `from app.keyboards.main_menu import menu`
- ‚úÖ `from app.i18n import t`
- ‚úÖ `from app.utils.csrf import issue_nonce`
- ‚úÖ `from app.services.scheduler import kpi_loop`
- ‚úÖ `from app.routes import include_all`
- ‚úÖ `from app.roles import DEMO_USERS, ROLES`

### ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç:
- ‚úÖ `init_command_service(bot)` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∫–æ–º–∞–Ω–¥
- ‚úÖ `setup_all_commands()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- ‚úÖ `menu(role, lang, theme, nonce)` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- ‚úÖ `t(key, lang)` - –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ `issue_nonce(storage, chat_id, user_id)` - CSRF –∑–∞—â–∏—Ç–∞
- ‚úÖ `kpi_loop()` - —Ñ–æ–Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ `include_all(dp)` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ–ø–ª–æ—é:

### üéØ **100% –ì–û–¢–û–í –ö –î–ï–ü–õ–û–Æ**

- ‚úÖ **–°–∏–Ω—Ç–∞–∫—Å–∏—Å** - –≤—Å–µ —Ñ–∞–π–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ **–ò–º–ø–æ—Ä—Ç—ã** - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - —É–ø—Ä–æ—â–µ–Ω–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ **Health check** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
- ‚úÖ **Docker** - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞
- ‚úÖ **–°–∫—Ä–∏–ø—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   export SERVER_HOST=89.169.38.246
   export SERVER_USER=root
   ./scripts/deploy.sh
   ```

2. **–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫:**
   ```bash
   ./scripts/quick_start.sh
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
   ```bash
   curl http://localhost:8080/health
   docker-compose logs -f bot
   ```

## üèÜ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ:

**–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

- ‚úÖ Graceful shutdown –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–æ—á–∫–∞—Ö
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã –∏ –∞–¥—Ä–µ—Å–∞
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é!** üöÄ 